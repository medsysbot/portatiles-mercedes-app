{% extends 'base_adminlte.html' %}
{% block title %}Dashboard Administración{% endblock %}
{% block body_class %}hold-transition sidebar-mini layout-fixed{% endblock %}

{% block body %}
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <button id="btnLogout" class="btn btn-default btn-sm">Cerrar sesión</button>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <a href="#" class="brand-link text-center">
      <span class="brand-text font-weight-light">Portátiles Mercedes</span>
    </a>
    <div class="sidebar">
      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
          <li class="nav-item">
            <a href="/admin/clientes" class="nav-link">
              <i class="nav-icon fas fa-users"></i>
              <p>Clientes</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/alquileres" class="nav-link">
              <i class="nav-icon fas fa-truck"></i>
              <p>Alquileres</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/ventas" class="nav-link">
              <i class="nav-icon fas fa-shopping-cart"></i>
              <p>Ventas</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/limpiezas" class="nav-link">
              <i class="nav-icon fas fa-broom"></i>
              <p>Servicios de limpieza</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/reportes" class="nav-link">
              <i class="nav-icon fas fa-chart-bar"></i>
              <p>Reportes</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/facturas" class="nav-link">
              <i class="nav-icon fas fa-file-invoice"></i>
              <p>Facturas pendientes</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/morosos" class="nav-link">
              <i class="nav-icon fas fa-exclamation-circle"></i>
              <p>Morosos</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/emails" class="nav-link">
              <i class="nav-icon fas fa-envelope"></i>
              <p>E-mails</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/ia-respuestas" class="nav-link">
              <i class="nav-icon fas fa-robot"></i>
              <p>IA – Respuestas automáticas</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/ia-emails" class="nav-link">
              <i class="nav-icon fas fa-mail-bulk"></i>
              <p>IA – E-mails leídos y clasificados</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="/admin/graficos" class="nav-link">
              <i class="nav-icon fas fa-chart-line"></i>
              <p>Gráficos de crecimiento</p>
            </a>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper -->
  <div class="content-wrapper">
    <section class="content pt-3">
      <div class="container-fluid">
        <!-- Tarjetas resumen -->
        <div class="row">
          <div class="col-lg-3 col-6">
            <div class="small-box bg-info">
              <div class="inner">
                <h3>0</h3>
                <p>Clientes</p>
              </div>
              <div class="icon"><i class="fas fa-users"></i></div>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-success">
              <div class="inner">
                <h3>0</h3>
                <p>Alquileres</p>
              </div>
              <div class="icon"><i class="fas fa-truck"></i></div>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-warning">
              <div class="inner">
                <h3>0</h3>
                <p>Ventas</p>
              </div>
              <div class="icon"><i class="fas fa-shopping-cart"></i></div>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-danger">
              <div class="inner">
                <h3>0</h3>
                <p>Pendientes</p>
              </div>
              <div class="icon"><i class="fas fa-file-invoice"></i></div>
            </div>
          </div>
          <div class="col-lg-3 col-6">
            <div class="small-box bg-secondary">
              <div class="inner">
                <h3>0</h3>
                <p>Morosos</p>
              </div>
              <div class="icon"><i class="fas fa-exclamation-circle"></i></div>
            </div>
          </div>
        </div>
        <!-- Gráfico de crecimiento -->
        <div class="row">
          <div class="col-12">
            <canvas id="growthChart" height="100"></canvas>
          </div>
        </div>
        <!-- Panel de últimos movimientos -->
        <div class="row mt-4">
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">Últimos movimientos</div>
              <div class="card-body">
                <!-- Aquí va la tabla/listado de movimientos -->
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card">
              <div class="card-header">E-mails recientes</div>
              <div class="card-body">
                <!-- Aquí va la tabla/listado de emails -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
  <!-- /.content-wrapper -->
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Ejemplo de gráfico de crecimiento ficticio. Reemplazar con datos reales desde backend.
  new Chart(document.getElementById('growthChart'), {
    type: 'line',
    data: {
      labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May'],
      datasets: [{
        label: 'Ventas',
        data: [5, 10, 7, 15, 20],
        borderColor: 'rgba(75, 192, 192, 1)',
        fill: false
      }]
    }
  });
  // TODO: agregar lógica de autenticación y carga dinámica de datos
</script>
{% endblock %}
