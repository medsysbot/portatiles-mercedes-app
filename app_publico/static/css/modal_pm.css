/* ===== MODAL ROBOT PM - Portátiles Mercedes (RESPONSIVE y DOCUMENTADO) ===== */

/* Capa del modal: cubre toda la pantalla, sin color de fondo */
#modal-pm {
  display: none;                          /* Oculto por defecto */
  position: fixed;                        /* Siempre fijo encima */
  left: 0; top: 0; width: 100vw; height: 100vh;
  z-index: 10010;                         /* Encima de todo */
  background: none;                       /* Sin oscurecer */
}

/* Contenido principal del modal, centrado */
#modal-pm .modal-pm-contenido {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  margin: auto;
  width: 44vw;           /* Ancho proporcional a la ventana */
  max-width: 580px;      /* Máximo permitido (ajusta según imagen) */
  min-width: 580px;      /* Mínimo permitido */
  height: 88vh;          /* Alto proporcional a la ventana */
  max-height: 850px;
  min-height: 850px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  pointer-events: auto;
}

/* Fondo del modal: la imagen, ocupa todo el contenido */
#modal-pm .modal-pm-img {
  position: absolute;
  width: 100%;           /* Siempre 100% del contenedor */
  height: 100%;
  left: 0; top: 0;
  z-index: 0;
  pointer-events: none;  /* No captura eventos */
  user-select: none;
}

/* Status del modal: feedback al usuario (grabando, enviando, etc) */
#modal-pm .modal-pm-status {
  position: absolute;
  top: 12%;              /* 12% desde arriba (proporcional) */
  left: 10%; right: 10%; /* Márgenes izquierdo/derecho de 10% */
  height: 5.5%;          /* Alto proporcional */
  color: #2be18a;
  font-size: 1.04em;
  text-align: center;
  z-index: 1;
  background: transparent;
  border: none;
  pointer-events: none;
  font-family: 'Nunito', Arial, sans-serif;
}

/* Botón del micrófono: centrado sobre la imagen */
#modal-pm .modal-btn-mic {
  position: absolute;
  top: 32.3%; left: 50.9%; transform: translateX(-50%);
  width: 17%; height: 10%;  /* Proporcional al ancho/alto del modal */
  background: none;
  border: none;
  z-index: 1;
  cursor: pointer;
  outline: none;
}
#modal-pm .modal-btn-mic img {
  width: 94%; height: 94%;    /* Imagen micrófono dentro del botón */
  filter: drop-shadow(0 1px 6px #0005);
  pointer-events: none;
}

/* Textarea de pregunta: centrado en la parte inferior */
#modal-pm .modal-textarea {
  position: absolute;
  left: 30.4%; right: 28.84%;      /* Márgenes laterales en % */
  bottom: 35.63%;              /* Desde abajo, proporcional */
  height: 2.75%;                 /* Alto relativo al contenedor */
  z-index: 1;
  background: #24272bE0;
  color: #fff;
  border: 1.5px solid #43474c;
  border-radius: 8px;
  padding: 7px 10px;
  font-size: 1.08em;
  resize: none;
  font-family: 'Nunito', Arial, sans-serif;
}

#modal-pm .modal-statusarea {
  position: absolute;
  left: 30.6%;           /* Márgenes laterales (ajusta al gusto) */
  right: 29.5%;
  top: 46.5%;            /* Ajusta para ubicarlo abajo del micrófono */
  height: 2.9%;        /* Alto relativo al modal */
  font-size: 1.05em;
  z-index: 2;
  padding: 5px 10px;
  background: #24272bde;
  color: #bee5a0;
  border: 1.5px solid #2be18a88;  /* Borde verde */
  border-radius: 7px;
  font-family: 'Nunito', Arial, sans-serif;
  resize: none;
  pointer-events: none;
}

/* Botón SEND: centrado debajo del textarea */
#modal-pm .modal-btn-send {
  position: absolute;
  bottom: 27.4%;             /* Ajusta según tu diseño, 23% o lo que prefieras */
  left: 50.6%;
  transform: translateX(-50%);
  width: 14%;              /* Igual al micrófono o un poco menos */
  height: 8%;              /* Proporcional */
  background: none;
  border: none;
  z-index: 2;
  cursor: pointer;
  outline: none;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

#modal-pm .modal-btn-send img {
    width: 88%;
    height: 88%;
    display: block;
    margin: 0 auto;
    filter: drop-shadow(0 1px 6px #0004);
    pointer-events: none;
}

/* Imagen "grabando" (por defecto oculta, el JS la muestra cuando toca grabar) */
#img-grabando {
  display: block;      /* Cambia a block para ajustar visualmente */
  position: absolute;
  left: -10%; top: 44.8%;
  width: 137%;
  height: 8%;
  object-fit: contain;
  pointer-events: none;
  z-index: 5;
}


@media (max-width: 600px) {
  /* === CONTENEDOR PRINCIPAL DEL MODAL === */
  #modal-pm .modal-pm-contenido {
    width: 150vw;           /* El modal ocupa el 94% del ancho de la ventana */
    min-width: 97vw;       /* Mínimo 70% para evitar que quede muy chico */
    max-width: 97vw;       /* Máximo 99% del ancho, nunca desborda */
    height: 175vw;          /* Altura igual al ancho (modal cuadrado/adaptativo) */
    min-height: 90vw;      /* No deja que se achique de más */
    max-height: 90vh;      /* Nunca más alto que la pantalla */
    padding: 0;
    border-radius: 18px;   /* Bordes redondeados solo si tu imagen los permite */
    position: relative;    /* Necesario para posicionar los elementos hijos en absoluto */
  }

  /* === IMAGEN DE FONDO DEL MODAL === */
  #modal-pm .modal-pm-img {
    width: 100%;           /* Siempre ocupa todo el contenedor */
    height: 100%;
    left: 0; top: 0;
    border-radius: 18px;   /* Igual que el contenedor, si tu imagen es redonda */
  }

  /* === BOTÓN MICRÓFONO, centrado, tamaño proporcional === */
  #modal-pm .modal-btn-mic {
    position: absolute;
    top: 31.73%;           /* Distancia desde arriba: baja o sube el mic */
    left: 50.85%;
    transform: translateX(-50%);
    width: 20%;           /* El mic ocupa 20% del ancho del modal */
    height: 12%;          /* Alto proporcional, puedes subir/bajar esto */
    z-index: 2;
    padding: 0;
    background: none; border: none;
  }
  #modal-pm .modal-btn-mic img {
    width: 96%; height: 96%;    /* El ícono ocupa casi todo el botón */
    max-width: 80px; max-height: 80px; /* Tope máximo */
    min-width: 34px; min-height: 34px; /* Tope mínimo para iconos pequeños */
  }

  /* === BOTÓN SEND, centrado debajo del textarea === */
  #modal-pm .modal-btn-send {
    position: absolute;
    bottom: 26.6%;           /* Ajusta esto para subir/bajar el botón SEND */
    left: 50.6%;
    transform: translateX(-50%);
    width: 17%;            /* Ancho del botón SEND */
    height: 9.5%;          /* Alto del botón SEND */
    z-index: 2;
    padding: 0;
    background: none; border: none;
  }
  #modal-pm .modal-btn-send img {
    width: 100%; height: 100%;  /* Icono SEND siempre proporcional */
    max-width: 68px; max-height: 68px;
    min-width: 26px; min-height: 26px;
    display: block;
    margin: 0 auto;
  }

  /* === TEXTAREA PRINCIPAL: Donde el usuario escribe la pregunta === */
  #modal-pm .modal-textarea {
    position: absolute;
    left: 30.7%;             /* Margen izquierdo, ajústalo para centrar */
    right: 29.35%;            /* Margen derecho */
    bottom: 35.75%;           /* Subir/bajar textarea principal */
    height: 2.6%;           /* Altura del textarea */
    font-size: 1.03em;
    z-index: 2;
    padding: 5px 8px;
    background: #24272bE0;
    color: #fff;
    border: 1.5px solid #43474c;
    border-radius: 8px;
    resize: none;
    font-family: 'Nunito', Arial, sans-serif;
  }

  /* === TEXTAREA SECUNDARIA: Para mostrar mensajes como "Grabando..." === */
  #modal-pm .modal-statusarea {
    position: absolute;
    left: 30.54%;             /* Igual al principal, así se ven alineados */
    right: 29.82%;
    bottom: 49.1%;           /* Lo ubicas justo encima del textarea principal */
    height: 2.8%;          /* Un poco más bajo que el principal */
    font-size: 0.95em;
    z-index: 2;
    padding: 5px 8px;
    background: #292e32de; /* Fondo más oscuro para destacar */
    color: #bee5a0;        /* Color de texto llamativo */
    border: 1.5px solid #2be18a88;
    border-radius: 7px;
    resize: none;
    font-family: 'Nunito', Arial, sans-serif;
  }

  /* ---- Ajuste SOLO para la imagen PNG de status ("grabando") ---- */
  #img-grabando {
    display: none;                  /* Muestra la imagen (ajusta esto desde JS según estado) */
    position: absolute;
    left: -10%;
    top: 44.66%;
    width: 137%;                     /* Ocupa todo el ancho del wrapper */
    height: 8.4%;                    /* Ocupa todo el alto del wrapper */
    object-fit: contain;             /* Mantiene proporción, no la deforma */
    pointer-events: none;            /* No interfiere con clics */
    z-index: 5;                      /* Encima del textarea de status */
    background: transparent;
  }

   #img-enviando {
    display: block;                  /* Muestra la imagen cuando corresponda */
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;                     /* Ocupa todo el ancho del statusarea wrapper */
    height: 100%;                    /* Ocupa todo el alto del statusarea wrapper */
    object-fit: contain;             /* Mantiene la proporción del PNG */
    pointer-events: none;            /* No permite interacción */
    z-index: 5;                      /* Encima de la palabra, si la hay */
    background: transparent;
  }
}
