<!--
Archivo: debito.html
Descripción: Formulario para activar el débito automático
Acceso: Privado
Proyecto: Portátiles Mercedes
Última modificación: 2025-06-15
-->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Formulario para activar débito automático">
    <title>Débito Automático</title>
    <link rel="preload" as="image" href="/static/iconos/email-incorrecto%20.png">
    <link rel="preload" as="image" href="/static/iconos/enviando-informe.png">
    <link rel="preload" as="image" href="/static/iconos/enviando-mensaje.png">
    <link rel="preload" as="image" href="/static/iconos/enviando-reporte%20.png">
    <link rel="preload" as="image" href="/static/iconos/error%20-mensaje.png">
    <link rel="preload" as="image" href="/static/iconos/error-datos.png">
    <link rel="preload" as="image" href="/static/iconos/error-informe%20-limpieza%20.png">
    <link rel="preload" as="image" href="/static/iconos/error-registro%20.png">
    <link rel="preload" as="image" href="/static/iconos/exito-datos%20.png">
    <link rel="preload" as="image" href="/static/iconos/exito-informe%20.png">
    <link rel="preload" as="image" href="/static/iconos/exito-mensaje.png">
    <link rel="preload" as="image" href="/static/iconos/exito-registro.png">
    <link rel="preload" as="image" href="/static/iconos/guardando-datos%20.png">
    <link rel="preload" as="image" href="/static/iconos/password-error.png">
    <link rel="preload" as="image" href="/static/iconos/registrando-usuario.png">
    <link rel="preload" as="image" href="/static/iconos/registro-ok.png">
    <link rel="preload" as="image" href="/static/iconos/reporte-error.png">
    <link rel="preload" as="image" href="/static/iconos/reporte-exito.png">
    <link rel="preload" as="image" href="/static/iconos/seleccionar-rol.png">
    <link rel="preload" as="image" href="/static/iconos/verifique-contrasena.png">
</head>
<body class="admin-bg">
    <h1 class="no-margin-top">Activar Débito Automático</h1><!-- Título alineado arriba según estándar visual de Portátiles Mercedes -->
<!-- ==== Formulario principal ==== -->
    <form id="formDebito">
        <label>DNI / CUIT / CUIL del cliente
            <input type="text" name="dni_cuit_cuil">
        </label>
        <label>Monto mensual
            <input type="text" name="monto">
        </label>
        <label>Frecuencia (días)
            <input type="text" name="frecuencia_dias">
        </label>
        <button type="submit">Activar Débito Automático</button>
    </form>
<!-- ==== Scripts ==== -->
    <script>
        const form = document.getElementById('formDebito');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const datos = new FormData(form);
            try {
                const resp = await fetch('/activar_debito', {
                    method: 'POST',
                    body: datos
                });
                const resultado = await resp.json();
                if (resp.ok) {
                    mostrarAlertaPersonalizada('exito-datos', resultado.mensaje);
                    form.reset();
                } else {
                    mostrarAlertaPersonalizada('error-datos', 'Error: ' + (resultado.detail || 'No se pudo activar'));
                }
            } catch (_) {
                mostrarAlertaPersonalizada('error-datos', 'Error de conexión');
            }
        });
    </script>
    <div id="alerta-personalizada" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:9999; background:rgba(0,0,0,0.85); color:#fff; border-radius:14px; box-shadow:0 2px 16px rgba(0,0,0,0.2); padding:2em 1.8em; max-width:380px; width:95vw; min-height:96px; text-align:left; display:flex; align-items:center;">
        <img id="alerta-icono" src="" alt="icono" style="width:48px; height:48px; margin-right:1em; flex-shrink:0; filter:drop-shadow(0 2px 8px #0006);" />
        <span id="alerta-mensaje" style="font-size:1.2rem; line-height:1.35;"></span>
        <div class="alerta-botones"></div>
    </div>
    <script src="/static/js/alertas.js"></script>
</body>
</html>
