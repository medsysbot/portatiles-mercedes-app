{% extends 'panel_empleado.html' %}
{% block title %}{{ 'Editar Servicio de Limpieza' if servicio else 'Nuevo Servicio de Limpieza' }}{% endblock %}
{% block description %}Formulario para registrar o editar un servicio de limpieza{% endblock %}
{% block head_extra %}
{{ super() }}
{% endblock %}
{% block content %}
<h2 class="mt-0">{{ 'Editar Servicio de Limpieza' if servicio else 'Nuevo Servicio de Limpieza' }}</h2>

<form method="post" enctype="multipart/form-data">
  <div class="form-group">
    <label>Fecha del servicio</label>
    <input type="date" name="fecha_servicio" class="form-control" required
           value="{{ servicio.fecha_servicio if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>Número del baño</label>
    <input type="text" name="numero_bano" class="form-control" required
           value="{{ servicio.numero_bano if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>DNI / CUIT / CUIL</label>
    <input type="text" name="dni_cuit_cuil" class="form-control" required
           value="{{ servicio.dni_cuit_cuil if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>Nombre del cliente</label>
    <input type="text" name="nombre_cliente" class="form-control" required
           value="{{ servicio.nombre_cliente if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>Tipo de servicio</label>
    <input type="text" name="tipo_servicio" class="form-control" required
           value="{{ servicio.tipo_servicio if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>Observaciones</label>
    <textarea name="observaciones" class="form-control" rows="3">{{ servicio.observaciones if servicio else '' }}</textarea>
  </div>
  <div class="form-group">
    <label>Estado (escriba 'pendiente' o 'completo')</label>
    <input type="text" name="estado" class="form-control" required
           value="{{ servicio.estado if servicio else '' }}">
  </div>
  <div class="form-group">
    <label>Remito (foto o imagen)</label>
    {% if servicio and servicio.remito_url %}
      <p class="mb-2">Remito actual: <a href="{{ servicio.remito_url }}" target="_blank">Ver remito</a></p>
    {% endif %}
    <input type="file" name="remito" accept="application/pdf,image/png,image/jpeg" class="form-control">
  </div>
  <button type="submit" class="btn btn-primary">{{ 'Actualizar servicio' if servicio else 'Registrar servicio' }}</button>
  <a href="{{ '/empleado/limpieza' }}" class="btn btn-secondary">Volver</a>
</form>
{% endblock %}

<!-- ALERTA CENTRAL PERSONALIZADA -->
<div id="alert-manager" class="alert-container">
  <div class="alert-box">
    <img id="alert-icon" alt="icono-alerta" class="alert-icon" />
    <span id="alert-text" class="alert-message">Texto de alerta</span>
  </div>
</div>

{% block scripts %}
  {{ super() }}
  <script src="/static/js/alertas.js"></script>
{% endblock %}
